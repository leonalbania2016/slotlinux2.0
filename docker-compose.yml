version: '3.9'
services:
backend:
build: ./backend
environment:
- NODE_ENV=production
- PORT=8080
- FRONTEND_URL=http://localhost:5173
- SESSION_SECRET=${SESSION_SECRET}
- DISCORD_CLIENT_ID=${DISCORD_CLIENT_ID}
- DISCORD_CLIENT_SECRET=${DISCORD_CLIENT_SECRET}
- DISCORD_REDIRECT_URI=${DISCORD_REDIRECT_URI}
- DISCORD_BOT_TOKEN=${DISCORD_BOT_TOKEN}
- DATABASE_URL=file:./dev.db
ports:
- "8080:8080"


frontend:
build: ./frontend
environment:
- VITE_BACKEND_URL=http://localhost:8080
ports:
- "5173:4173" # vite preview
command: ["npm","run","preview"]